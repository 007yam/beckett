<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Getting Started - Beckett</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Getting Started";
    var mkdocs_page_input_path = "intro.md";
    var mkdocs_page_url = "/intro/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Beckett</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Getting Started</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#getting-started">Getting Started</a></li>
                
            
                <li class="toctree-l3"><a href="#a-basic-client">A Basic Client</a></li>
                
                    <li><a class="toctree-l4" href="#resources">Resources</a></li>
                
                    <li><a class="toctree-l4" href="#client">Client</a></li>
                
                    <li><a class="toctree-l4" href="#make-http-calls">Make HTTP calls!</a></li>
                
                    <li><a class="toctree-l4" href="#further-reading">Further reading</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../resources/">Resources</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../clients/">Clients</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../advanced/">Advanced Features</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../exceptions/">Exceptions</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Beckett</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Getting Started</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="getting-started">Getting Started</h2>
<p>Beckett can be installed using <a href="https://pypi.python.org/pypi/pip/">pip</a>:</p>
<pre><code class="bash">pip install beckett
</code></pre>

<h2 id="a-basic-client">A Basic Client</h2>
<p>Let's get to grips with Beckett by writing a basic client for communicating with <a href="https://swapi.co">Swapi</a>, the Star Wars API.</p>
<h3 id="resources">Resources</h3>
<p>The first thing we'll need to do is declare a <a href="../resources">Resource</a>. Swapi has <a href="http://swapi.co/documentation">many resources</a>, but let's create a resource for just <a href="http://swapi.co/documentation#people">People</a>:</p>
<pre><code class="python"># my_resources.py
from beckett import resources


class PersonResource(resources.BaseResource):
    class Meta:
        name = 'Person'
        resource_name = 'people'
        identifier = 'url'
        attributes = (
            'name',
            'birth_year',
            'eye_color',
            'gender',
            'height',
            'mass',
            'url',
        )
        valid_status_codes = (
            200,
        )
        methods = (
            'get',
        )
</code></pre>

<p>Everything in Beckett is defined using Python classes and Meta classes. The definitions are then used by Beckett to construct the interface for communicating with the HTTP API for you. This is what we mean when we say Beckett is <em>"convention-based"</em> - it understands RESTful HTTP APIs by default and will adapt the definitions you write to fit within it.</p>
<p>In the example above we've defined a series of properties for this resource. Let's talk about each of them now to understand what they mean:</p>
<ul>
<li><strong>name</strong>: This string will be used by Beckett in Python <code>__repr__</code> and <code>__unicode__</code> methods.</li>
<li><strong>resource_name</strong>: Sometimes the resource name differs slightly because the plural of a resource is different from the singular. RESTful HTTP APIs conventionally use plural names in URIs. This property is not required and Beckett will try to guess the plural name of the <strong>name</strong> property. In this case it will guess <code>persons</code>, which doesn't fit with our API. Luckily, the <strong>resource_name</strong> attribute is provided so we can avoid this behaviour if we want.</li>
<li><strong>identifier</strong>: This attribute is used to determine the unique identifying attribute of the resource. It will be used in Python <code>__repr__</code> and <code>__unicode__</code> methods.</li>
<li><strong>attributes</strong>: This is a tuple of strings, declaring the attributes you want to see from the resource when it is generated. If you look at <a href="http://swapi.co/api/people/1/">an example API response</a> from Swapi, you will see these attributes listed. You can read more about <a href="../resources/#resource-properties">Resource attributes here</a>. You can use this to white-list specific attributes.</li>
<li><strong>valid_status_codes</strong>: This is a tuple of integers, declaring the HTTP response codes you consider "valid". Some HTTP APIs behave differently and certain responses are expected, such as <code>202</code> or <code>404</code>. If an HTTP response code is received that is not in the list, Beckett will raise an exception.</li>
<li><strong>methods</strong>: This is a tuple of strings, declaring the HTTP methods that can be used with this resource. Beckett will use this tuple to generate python methods.</li>
</ul>
<p>You can read more about resources on the <a href="../resources">Resources</a> page.</p>
<h3 id="client">Client</h3>
<p>Now that we've got our Resource created, let's build a Client to start using it.</p>
<pre><code class="python"># my_client.py
from beckett import clients

from .my_resources import PersonResource

class StarWarsClient(clients.BaseClient):
    class Meta:
        name = 'Star Wars API Client'
        base_url = 'https://swapi.co/api/'
        resources = (
            PersonResource,
        )
</code></pre>

<p>Just like the Resource, we can declare a bunch of properties on our Client:</p>
<ul>
<li><strong>name</strong> - This property will be used in HTTP headers as well as in <code>__repr__</code> and <code>__unicode__</code> methods.</li>
<li><strong>base_url</strong> - This is the base url for the API. Beckett will use this to construct the URL when making HTTP requests.</li>
<li><strong>resources</strong> - This is a tuple of <code>Resource</code> classes that you want the client to communicate with.</li>
</ul>
<p>You can read more about clients on the <a href="../clients">Clients</a> page.</p>
<h3 id="make-http-calls">Make HTTP calls!</h3>
<p>We can now start calling the API!</p>
<pre><code class="bash">from .my_resources import PersonResource
from .my_client import StarWarsClient

swapi = StarWarsClient()
results_list = swapi.get_person(uid=1)

person = results_list[0]

isinstance(result, PersonResource)
&gt;&gt;&gt; True
person.name
'Luke Skywalker'
</code></pre>

<p>Beckett has generated a <code>get_person</code> method because it has read the <code>PersonResource</code> and seen which HTTP methods it wants. This method conventionally takes a single parameter <code>uid</code>. These generated methods also except arbitrary keyword arguments for customisation. You can read more about this in the <a href="../advanced">advanced</a> section.</p>
<p>The response is a list of <code>PersonResource</code> instances. Beckett infers the JSON response and transforms the JSON values into attributes on each instance, so we can query <code>person.name</code>.</p>
<h3 id="further-reading">Further reading</h3>
<p>This guide has demonstrated the basics of Beckett, using most of the conventionally-based stuff. However, most HTTP APIs are not always perfectly RESTful. Luckily, Beckett is designed to be flexible enough to provide ways to support other HTTP APIs, we recommend reading the <a href="../advanced">advanced</a> guide if you're looking to modify Beckett's behaviour.</p>
<p>A working example of this code can be found in the <a href="https://github.com/phalt/beckett/blob/master/example/main.py">GitHub repository</a>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../resources/" class="btn btn-neutral float-right" title="Resources">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../resources/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
